.\" Automatically generated by Pandoc 3.1.9
.\"
.TH "QUICKEMU" "1" "November 26, 2023" "quickemu" "Quickemu User Manual"
.SH NAME
quickemu - A quick VM builder and manager
.SH SYNOPSIS
\f[B]quickemu\f[R] [\f[I]OPTION\f[R]]\&...
.SH DESCRIPTION
\f[B]quickemu\f[R] will create and run highly optimised desktop virtual
machines for Linux, macOS and Windows
.SH OPTIONS
.TP
\f[B]\[en]vm\f[R]
vm configuration file
.PP
You can also pass optional parameters
.TP
\f[B]\[en]braille\f[R]
Enable braille support.
Requires SDL.
.TP
\f[B]\[en]delete-disk\f[R]
Delete the disk image.
.TP
\f[B]\[en]display\f[R]
Select display backend.
`sdl' (default), `gtk', `none', `spice' or `spice-app'
.TP
\f[B]\[en]sound-card\f[R]
Select virtual audio emulation.
`intel-hda' (default), `ac97' (solaris default), `es1370', `sb16'
(freedos default) or `none'
.TP
\f[B]\[en]fullscreen\f[R]
Starts VM in full screen mode (Ctl+Alt+f to exit)
.TP
\f[B]\[en]ignore-msrs-always\f[R]
Configure KVM to always ignore unhandled machine-specific registers
.TP
\f[B]\[en]screen <screen>\f[R]
Use specified screen to determine the window size.
.TP
\f[B]\[en]shortcut\f[R]
Create a desktop shortcut
.TP
\f[B]\[en]snapshot apply <tag>\f[R]
Apply/restore a snapshot.
.TP
\f[B]\[en]snapshot create <tag>\f[R]
Create a snapshot.
.TP
\f[B]\[en]snapshot delete <tag>\f[R]
Delete a snapshot.
.TP
\f[B]\[en]snapshot info\f[R]
Show disk/snapshot info.
.TP
\f[B]\[en]status-quo\f[R]
Do not commit any changes to disk/snapshot.
.TP
\f[B]\[en]version\f[R]
Print version
.SH EXAMPLES
.TP
\f[B]quickemu \[en]vm ubuntu-mate-22.04.conf\f[R]
Launches the VM specified in the file \f[I]ubuntu-mate-22.04.conf\f[R]
.SS Introduction
Quickly create and run highly optimised desktop virtual machines for
Linux, macOS and Windows; with just two commands.
You decide what operating system you want to run and Quickemu will
figure out the best way to do it for you.
For example:
.IP
.EX
quickget ubuntu-mate 22.04
quickemu --vm ubuntu-mate-22.04.conf
.EE
.PP
The original objective of the project was to enable quick testing of
Linux distributions where the virtual machine configurations can be
stored anywhere, such as external USB storage or your home directory,
and no elevated permissions are required to run the virtual machines.
\f[B]Quickemu now also includes comprehensive support for macOS and
Windows\f[R].
.SS Features
.IP \[bu] 2
\f[B]macOS\f[R] Monterey, Big Sur, Catalina, Mojave & High Sierra
.IP \[bu] 2
\f[B]Windows\f[R] 10 and 11 including TPM 2.0
.IP \[bu] 2
\c
.UR https://ubuntu.com/desktop
Ubuntu
.UE \c
\ and all the \f[B]\c
.UR https://ubuntu.com/download/flavours
official Ubuntu flavours
.UE \c
\f[R]
.IP \[bu] 2
\f[B]Over 360 operating system editions are supported!\f[R]
.IP \[bu] 2
Full SPICE support including host/guest clipboard sharing
.IP \[bu] 2
VirtIO-webdavd file sharing for Linux and Windows guests
.IP \[bu] 2
VirtIO-9p file sharing for Linux and macOS guests
.IP \[bu] 2
\c
.UR https://wiki.qemu.org/Features/GuestAgent
QEMU Guest Agent support
.UE \c
; provides access to a system-level agent via standard QMP commands
.IP \[bu] 2
Samba file sharing for Linux, macOS and Windows guests (\f[I]if
\f[CI]smbd\f[I] is installed on the host\f[R])
.IP \[bu] 2
VirGL acceleration
.IP \[bu] 2
USB device pass-through
.IP \[bu] 2
Smartcard pass-through
.IP \[bu] 2
Automatic SSH port forwarding to guests
.IP \[bu] 2
Network port forwarding
.IP \[bu] 2
Full duplex audio
.IP \[bu] 2
Braille support
.IP \[bu] 2
EFI (with or without SecureBoot) and Legacy BIOS boot
.IP \[bu] 2
Graphical user interfaces available
.PP
Quickemu is a wrapper for the excellent \c
.UR https://www.qemu.org/
QEMU
.UE \c
\ that attempts to automatically \f[I]\[lq]do the right thing\[rq]\f[R],
rather than expose exhaustive configuration options.
.PP
We have a Discord for this project: \c
.UR https://discord.gg/sNmz3uw
[IMAGE: \c
.UR
https://img.shields.io/discord/712850672223125565?color=0C306A&label=WimpysWorld%20Discord&logo=Discord&logoColor=ffffff&style=flat-square
Discord
.UE \c
]
.UE \c
.PP
See this (old) video where I explain some of my motivations for creating
Quickemu.
.PP
\c
.UR https://www.youtube.com/watch?v=AOTYWEgw0hI
[IMAGE: \c
.UR https://img.youtube.com/vi/AOTYWEgw0hI/0.jpg
Replace VirtualBox with Bash & QEMU
.UE \c
]
.UE \c
.SS Requirements
.IP \[bu] 2
\c
.UR https://www.qemu.org/
QEMU
.UE \c
\ (\f[I]6.0.0 or newer\f[R]) \f[B]with GTK, SDL, SPICE & VirtFS
support\f[R]
.IP \[bu] 2
\c
.UR https://www.gnu.org/software/bash/
bash
.UE \c
\ (\f[I]4.0 or newer\f[R])
.IP \[bu] 2
\c
.UR https://www.gnu.org/software/coreutils/
Coreutils
.UE \c
.IP \[bu] 2
\c
.UR https://github.com/tianocore/edk2
EDK II
.UE \c
.IP \[bu] 2
\c
.UR https://www.gnu.org/software/grep/
grep
.UE \c
.IP \[bu] 2
\c
.UR https://stedolan.github.io/jq/
jq
.UE \c
.IP \[bu] 2
\c
.UR https://wiki.linuxfoundation.org/lsb/start
LSB
.UE \c
.IP \[bu] 2
\c
.UR https://gitlab.com/procps-ng/procps
procps
.UE \c
.IP \[bu] 2
\c
.UR https://www.python.org/
python3
.UE \c
.IP \[bu] 2
\c
.UR
https://github.com/acidanthera/OpenCorePkg/tree/master/Utilities/macrecovery
macrecovery
.UE \c
.IP \[bu] 2
\c
.UR http://cdrtools.sourceforge.net/private/cdrecord.html
mkisofs
.UE \c
.IP \[bu] 2
\c
.UR https://github.com/gregkh/usbutils
usbutils
.UE \c
.IP \[bu] 2
\c
.UR https://github.com/karelzak/util-linux
util-linux
.UE \c
.IP \[bu] 2
\c
.UR https://www.gnu.org/software/sed/
sed
.UE \c
.IP \[bu] 2
\c
.UR http://www.dest-unreach.org/socat/
socat
.UE \c
.IP \[bu] 2
\c
.UR https://gitlab.freedesktop.org/spice/spice-gtk
spicy
.UE \c
.IP \[bu] 2
\c
.UR https://github.com/stefanberger/swtpm
swtpm
.UE \c
.IP \[bu] 2
\c
.UR https://www.gnu.org/software/wget/
Wget
.UE \c
.IP \[bu] 2
\c
.UR https://www.freedesktop.org/wiki/Software/xdg-user-dirs/
xdg-user-dirs
.UE \c
.IP \[bu] 2
\c
.UR https://gitlab.freedesktop.org/xorg/app/xrandr
xrandr
.UE \c
.IP \[bu] 2
\c
.UR http://zsync.moria.org.uk/
zsync
.UE \c
.IP \[bu] 2
\c
.UR http://www.info-zip.org/UnZip.html
unzip
.UE \c
.SS Installing Requirements
For Ubuntu, Arch and nixos systems the \c
.UR https://launchpad.net/~flexiondotorg/+archive/ubuntu/quickemu
ppa
.UE \c
, \c
.UR https://aur.archlinux.org/packages/quickemu
AUR
.UE \c
\ or \c
.UR
https://github.com/NixOS/nixpkgs/tree/master/pkgs/development/quickemu
nix
.UE \c
\ packaging will take care of the dependencies.
For other host distributions or operating systems it will be necessary
to install the above requirements or their equivalents.
.PP
These examples may save a little typing
.PP
Debian (and direct derivatives such as MX Linux):
.IP
.EX
sudo apt install qemu bash coreutils ovmf grep jq lsb-base procps python3 genisoimage usbutils util-linux sed spice-client-gtk libtss2-tcti-swtpm0 wget xdg-user-dirs zsync unzip
.EE
.PP
Fedora:
.IP
.EX
sudo dnf install qemu bash coreutils edk2-tools grep jq lsb procps python3 genisoimage usbutils util-linux sed spice-gtk-tools swtpm wget xdg-user-dirs xrandr unzip
.EE
.PP
MacOS:
.PP
This is a work in progress (see \c
.UR https://github.com/quickemu-project/quickemu/issues/248
issue 248
.UE \c
\ for other steps and changes that may enable running on MacOS)
.IP
.EX
brew install qemu bash coreutils grep jq python\[at]3.10 cdrtools gnu-sed spice-gtk wget zsync
.EE
.SH Usage
.SS Graphical User Interfaces
While \f[CR]quickemu\f[R] and \f[CR]quickget\f[R] are designed for the
terminal, a graphical user interface is also available:
.IP \[bu] 2
\f[B]\c
.UR https://github.com/quickgui/quickgui
Quickgui
.UE \c
\f[R] by \c
.UR https://github.com/marxjohnson
Mark Johnson
.UE \c
\ and \c
.UR https://github.com/ymauray
Yannick Mauray
.UE \c
\&.
.PP
Many thanks to \c
.UR https://github.com/Lukewh
Luke Wesley-Holley
.UE \c
\ and \c
.UR https://github.com/daPhipz
Philipp Kiemle
.UE \c
\ for creating the \f[B]\c
.UR https://github.com/Lukewh/quickemu-icons
Quickemu icons
.UE \c
\f[R] ðŸŽ¨
.SS Quickgui for Ubuntu
.IP
.EX
sudo add-apt-repository ppa:yannick-mauray/quickgui
sudo apt update
sudo apt install quickgui
.EE
.SS quickemu quickget X terminal project
From Nov 2023, there is also a multi option desktop integrated text
interface, with lots of unique tools and utilities to help you make
light work of installations, snapshots and disk management
.IP \[bu] 2
\f[B]\c
.UR https://github.com/TuxVinyards/qqX
qqX
.UE \c
\f[R] is independently curated by \c
.UR https://github.com/TuxVinyards
Alex Genovese
.UE \c
\ (see the github pages)
[IMAGE: \c
.UR
https://github.com/TuxVinyards/qqX/assets/3956806/18e5c495-8072-49a5-8b9c-e1302549efcf
qqX-vmm
.UE \c
]
qqX-vmm
.SS Ubuntu Guest
\f[CR]quickget\f[R] will automatically download an Ubuntu release and
create the virtual machine configuration.
.IP
.EX
quickget ubuntu 22.04
quickemu --vm ubuntu-22.04.conf
.EE
.IP \[bu] 2
Complete the installation as normal.
.IP \[bu] 2
Post-install:
.RS 2
.IP \[bu] 2
Install the SPICE agent (\f[CR]spice-vdagent\f[R]) in the guest to
enable copy/paste and USB redirection
.RS 2
.IP \[bu] 2
\f[CR]sudo apt install spice-vdagent\f[R]
.RE
.IP \[bu] 2
Install the SPICE WebDAV agent (\f[CR]spice-webdavd\f[R]) in the guest
to enable file sharing.
.RS 2
.IP \[bu] 2
\f[CR]sudo apt install spice-webdavd\f[R]
.RE
.RE
.SS Ubuntu devel (daily-live) images
\f[CR]quickget\f[R] can also download/refresh devel images via
\f[CR]zsync\f[R] for Ubuntu developers and testers.
.IP
.EX
quickget ubuntu devel
quickemu --vm ubuntu-devel.conf
.EE
.PP
You can run \f[CR]quickget ubuntu devel\f[R] to refresh your daily
development image as often as you like, it will even automatically
switch to a new series.
.SS Ubuntu Flavours
All the official Ubuntu flavours are supported, just replace
\f[CR]ubuntu\f[R] with your preferred flavour.
.IP \[bu] 2
\f[CR]edubuntu\f[R] (Edubuntu)
.IP \[bu] 2
\f[CR]kubuntu\f[R] (Kubuntu)
.IP \[bu] 2
\f[CR]lubuntu\f[R] (Lubuntu)
.IP \[bu] 2
\f[CR]ubuntu-budgie\f[R] (Ubuntu Budgie)
.IP \[bu] 2
\f[CR]ubuntucinnamon\f[R] (Ubuntu Cinnamon)
.IP \[bu] 2
\f[CR]ubuntukylin\f[R] (Ubuntu Kylin)
.IP \[bu] 2
\f[CR]ubuntu-mate\f[R] (Ubuntu MATE)
.IP \[bu] 2
\f[CR]ubuntu-server\f[R] (Ubuntu Server)
.IP \[bu] 2
\f[CR]ubuntustudio\f[R] (Ubuntu Studio)
.IP \[bu] 2
\f[CR]ubuntu\f[R] (Ubuntu)
.IP \[bu] 2
\f[CR]ubuntu-unity\f[R] (Ubuntu Unity)
.IP \[bu] 2
\f[CR]xubuntu\f[R] (Xubuntu)
.PP
You can also use \f[CR]quickget\f[R] with options to:
.IP
.EX
    # show an OS ISO download URL for {os} {release} [edition] 
    quickget --show-iso-url fedora 38 Silverblue   
    # test if and OS ISO is available for {os} {release} [edition]
    quickget --test-iso-url nixos 23.05 plasma5
    # open an OS distribution homepage in a browser
    quickget --open-distro-homepage  ubuntu-mate
.EE
.PP
The \f[CR]--show-iso-url\f[R] and \f[CR]--test-iso-url\f[R] options
\f[B]do not\f[R] work for \f[CR]Windows\f[R] (\f[CR]quickget\f[R] will
begin downloading the requested release and edition of windows)
.SS Other Operating Systems
\f[CR]quickget\f[R] also supports:
.IP \[bu] 2
\f[CR]alma\f[R] (Alma Linux)
.IP \[bu] 2
\f[CR]alpine\f[R] (Alpine Linux)
.IP \[bu] 2
\f[CR]android\f[R] (Android x86)
.IP \[bu] 2
\f[CR]antix\f[R] (Antix)
.IP \[bu] 2
\f[CR]archcraft\f[R] (Archcraft)
.IP \[bu] 2
\f[CR]archlinux\f[R] (Arch Linux)
.IP \[bu] 2
\f[CR]arcolinux\f[R] (Arco Linux)
.IP \[bu] 2
\f[CR]batocera\f[R] (Batocera)
.IP \[bu] 2
\f[CR]blendos\f[R] (BlendOS)
.IP \[bu] 2
\f[CR]bodhi\f[R] (Bodhi)
.IP \[bu] 2
\f[CR]bunsenlabs\f[R] (Bunsenlabs)
.IP \[bu] 2
\f[CR]cachyos\f[R] (CachyOS)
.IP \[bu] 2
\f[CR]centos-stream\f[R] (CentOS Stream)
.IP \[bu] 2
\f[CR]debian\f[R] (Debian)
.IP \[bu] 2
\f[CR]deepin\f[R] (Deepin)
.IP \[bu] 2
\f[CR]devuan\f[R] (Devuan)
.IP \[bu] 2
\f[CR]dragonflybsd\f[R] (DragonFlyBSD)
.IP \[bu] 2
\f[CR]elementary\f[R] (elementary OS)
.IP \[bu] 2
\f[CR]endeavouros\f[R] (EndeavourOS)
.IP \[bu] 2
\f[CR]endless\f[R] (Endless OS)
.IP \[bu] 2
\f[CR]fedora\f[R] (Fedora)
.IP \[bu] 2
\f[CR]freebsd\f[R] (FreeBSD)
.IP \[bu] 2
\f[CR]freedos\f[R] (FreeDOS)
.IP \[bu] 2
\f[CR]garuda\f[R] (Garuda Linux)
.IP \[bu] 2
\f[CR]gentoo\f[R] (Gentoo)
.IP \[bu] 2
\f[CR]ghostbsd\f[R] (GhostBSD)
.IP \[bu] 2
\f[CR]haiku\f[R] (Haiku)
.IP \[bu] 2
\f[CR]holoiso\f[R] (SteamOS HoloISO)
.IP \[bu] 2
\f[CR]kali\f[R] (Kali)
.IP \[bu] 2
\f[CR]kdeneon\f[R] (KDE Neon)
.IP \[bu] 2
\f[CR]kolibrios\f[R] (KolibriOS)
.IP \[bu] 2
\f[CR]linuxlite\f[R] (Linux Lite)
.IP \[bu] 2
\f[CR]linuxmint\f[R] (Linux Mint)
.IP \[bu] 2
\f[CR]lmde\f[R] (Linux Mint Debian Edition)
.IP \[bu] 2
\f[CR]mageia\f[R] (Mageia)
.IP \[bu] 2
\f[CR]manjaro\f[R] (Manjaro)
.IP \[bu] 2
\f[CR]mxlinux\f[R] (MX Linux)
.IP \[bu] 2
\f[CR]netboot\f[R] (netboot.xyz)
.IP \[bu] 2
\f[CR]netbsd\f[R] (NetBSD)
.IP \[bu] 2
\f[CR]nixos\f[R] (NixOS)
.IP \[bu] 2
\f[CR]openbsd\f[R] (OpenBSD)
.IP \[bu] 2
\f[CR]openindiana\f[R] (OpenIndiana)
.IP \[bu] 2
\f[CR]opensuse\f[R] (openSUSE)
.IP \[bu] 2
\f[CR]oraclelinux\f[R] (Oracle Linux)
.IP \[bu] 2
\f[CR]peppermint\f[R] (PeppermintOS)
.IP \[bu] 2
\f[CR]popos\f[R] (Pop!_OS)
.IP \[bu] 2
\f[CR]porteus\f[R] (Porteus)
.IP \[bu] 2
\f[CR]reactos\f[R] (ReactOS)
.IP \[bu] 2
\f[CR]rebornos\f[R] (RebornOS)
.IP \[bu] 2
\f[CR]rockylinux\f[R] (Rocky Linux)
.IP \[bu] 2
\f[CR]siduction\f[R] (Siduction)
.IP \[bu] 2
\f[CR]slackware\f[R] (Slackware)
.IP \[bu] 2
\f[CR]solus\f[R] (Solus)
.IP \[bu] 2
\f[CR]spiral\f[R] (Spiral)
.IP \[bu] 2
\f[CR]tails\f[R] (Tails)
.IP \[bu] 2
\f[CR]tinycore\f[R] (Tiny Core Linux)
.IP \[bu] 2
\f[CR]trisquel\f[R] (Trisquel)
.IP \[bu] 2
\f[CR]truenas-core\f[R] (TrueNAS Core)
.IP \[bu] 2
\f[CR]truenas-scale\f[R] (TrueNAS Scale)
.IP \[bu] 2
\f[CR]vanillaos\f[R] (Vanilla OS)
.IP \[bu] 2
\f[CR]void\f[R] (Void Linux)
.IP \[bu] 2
\f[CR]vxlinux\f[R] (VX Linux)
.IP \[bu] 2
\f[CR]xerolinux\f[R] (XeroLinux)
.IP \[bu] 2
\f[CR]zorin\f[R] (Zorin OS)
.PP
Or you can download a Linux image and manually create a VM
configuration.
.IP \[bu] 2
Download a .iso image of a Linux distribution
.IP \[bu] 2
Create a VM configuration file; for example
\f[CR]debian-bullseye.conf\f[R]
.IP
.EX
guest_os=\[dq]linux\[dq]
disk_img=\[dq]debian-bullseye/disk.qcow2\[dq]
iso=\[dq]debian-bullseye/firmware-11.0.0-amd64-DVD-1.iso\[dq]
.EE
.IP \[bu] 2
Use \f[CR]quickemu\f[R] to start the virtual machine:
.IP
.EX
quickemu --vm debian-bullseye.conf
.EE
.IP \[bu] 2
Complete the installation as normal.
.IP \[bu] 2
Post-install:
.RS 2
.IP \[bu] 2
Install the SPICE agent (\f[CR]spice-vdagent\f[R]) in the guest to
enable copy/paste and USB redirection.
.IP \[bu] 2
Install the SPICE WebDAV agent (\f[CR]spice-webdavd\f[R]) in the guest
to enable file sharing.
.RE
.SS macOS Guest
\f[CR]quickget\f[R] automatically downloads a macOS recovery image and
creates a virtual machine configuration.
.IP
.EX
quickget macos catalina
quickemu --vm macos-catalina.conf
.EE
.PP
macOS \f[CR]high-sierra\f[R], \f[CR]mojave\f[R], \f[CR]catalina\f[R],
\f[CR]big-sur\f[R], \f[CR]monterey\f[R] and \f[CR]ventura\f[R] are
supported.
.IP \[bu] 2
Use cursor keys and enter key to select the \f[B]macOS Base System\f[R]
.IP \[bu] 2
From \f[B]macOS Utilities\f[R]
.RS 2
.IP \[bu] 2
Click \f[B]Disk Utility\f[R] and \f[B]Continue\f[R]
.RS 2
.IP \[bu] 2
Select \f[CR]QEMU HARDDISK Media\f[R] (\[ti]103.08GB) from the list (on
Big Sur and above use \f[CR]Apple Inc. VirtIO Block Device\f[R]) and
click \f[B]Erase\f[R].
.IP \[bu] 2
Enter a \f[CR]Name:\f[R] for the disk
.IP \[bu] 2
If you are installing macOS Mojave or later (Catalina, Big Sur, Monterey
and Ventura), choose any of the APFS options as the filesystem.
MacOS Extended may not work.
.RE
.IP \[bu] 2
Click \f[B]Erase\f[R].
.IP \[bu] 2
Click \f[B]Done\f[R].
.IP \[bu] 2
Close Disk Utility
.RE
.IP \[bu] 2
From \f[B]macOS Utilities\f[R]
.RS 2
.IP \[bu] 2
Click \f[B]Reinstall macOS\f[R] and \f[B]Continue\f[R]
.RE
.IP \[bu] 2
Complete the installation as you normally would.
.RS 2
.IP \[bu] 2
On the first reboot use cursor keys and enter key to select \f[B]macOS
Installer\f[R]
.IP \[bu] 2
On the subsequent reboots use cursor keys and enter key to select the
disk you named
.RE
.IP \[bu] 2
Once you have finished installing macOS you will be presented with an
the out-of-the-box first-start wizard to configure various options and
set up your username and password
.IP \[bu] 2
OPTIONAL: After you have concluded the out-of-the-box wizard, you may
want to enable the TRIM feature that the computer industry created for
SSD disks.
This feature in our macOS installation will allow QuickEmu to compact
(shrink) your macOS disk image whenever you delete files inside the
Virtual Machine.
Without this step your macOS disk image will only ever get larger and
will not shrink even when you delete lots of data inside macOS.
.RS 2
.IP \[bu] 2
To enable TRIM, open the Terminal application and type the following
command followed by pressing enter to tell macos to use the TRIM command
on the hard disk when files are deleted:
.RE
.IP
.EX
sudo trimforce enable
.EE
.PP
You will be prompted to enter your account\[cq]s password to gain the
privilege needed.
Once you\[cq]ve entered your password and pressed enter the command will
request confirmation in the form of two questions that require you to
type y (for a \[lq]yes\[rq] response) followed by enter to confirm.
If you press enter without first typing y the system will consider that
a negative response as though you said \[lq]no\[rq]:
.IP
.EX
IMPORTANT NOTICE: This tool force-enables TRIM for all relevant attached devices, even though such devices may not have been validated for data integrity while using TRIM. Use of this tool to enable TRIM may result in unintended data loss or data corruption. It should not be used in a commercial operating environment or with important data. Before using this tool, you should back up all of your data and regularly back up data while TRIM is enabled. This tool is provided on an \[dq]as is\[dq] basis. APPLE MAKES NO WARRANTIES, EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION THE IMPLIED WARRANTIES OF NON-INFRINGEMENT, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE, REGARDING THIS TOOL OR ITS USE ALONE OR IN COMBINATION WITH YOUR DEVICES, SYSTEMS, OR SERVICES. BY USING THIS TOOL TO ENABLE TRIM, YOU AGREE THAT, TO THE EXTENT PERMITTED BY APPLICABLE LAW, USE OF THE TOOL IS AT YOUR SOLE RISK AND THAT THE ENTIRE RISK AS TO SATISFACTORY QUALITY, PERFORMANCE, ACCURACY AND EFFORT IS WITH YOU.
Are you sure you with to proceed (y/N)?
.EE
.PP
And a second confirmation once you\[cq]ve confirmed the previous one:
.IP
.EX
Your system will immediately reboot when this is complete.
Is this OK (y/N)?
.EE
.PP
As the last message states, your system will automatically reboot as
soon as the command completes.
.PP
The default macOS configuration looks like this:
.IP
.EX
guest_os=\[dq]macos\[dq]
img=\[dq]macos-catalina/RecoveryImage.img\[dq]
disk_img=\[dq]macos-catalina/disk.qcow2\[dq]
macos_release=\[dq]catalina\[dq]
.EE
.IP \[bu] 2
\f[CR]guest_os=\[dq]macos\[dq]\f[R] instructs Quickemu to optimise for
macOS.
.IP \[bu] 2
\f[CR]macos_release=\[dq]catalina\[dq]\f[R] instructs Quickemu to
optimise for a particular macOS release.
.RS 2
.IP \[bu] 2
For example VirtIO Network and Memory Ballooning are available in Big
Sur and newer, but not previous releases.
.IP \[bu] 2
And VirtIO Block Media (disks) are supported/stable in Catalina and
newer.
.RE
.SS macOS compatibility
There are some considerations when running macOS via Quickemu.
.IP \[bu] 2
Supported macOS releases:
.RS 2
.IP \[bu] 2
High Sierra
.IP \[bu] 2
Mojave
.IP \[bu] 2
Catalina \f[B](Recommended)\f[R]
.IP \[bu] 2
Big Sur
.IP \[bu] 2
Monterey
.IP \[bu] 2
Ventura
.RE
.IP \[bu] 2
\f[CR]quickemu\f[R] will automatically download the required \c
.UR https://github.com/acidanthera/OpenCorePkg
OpenCore
.UE \c
\ bootloader and OVMF firmware from \c
.UR https://github.com/kholia/OSX-KVM
OSX-KVM
.UE \c
\&.
.IP \[bu] 2
Optimised by default, but no GPU acceleration is available.
.RS 2
.IP \[bu] 2
Host CPU vendor is detected and guest CPU is optimised accordingly.
.IP \[bu] 2
\c
.UR https://www.kraxel.org/blog/2019/06/macos-qemu-guest/
VirtIO Block Media
.UE \c
\ is used for the system disk where supported.
.IP \[bu] 2
\c
.UR http://philjordan.eu/osx-virt/
VirtIO \f[CR]usb-tablet\f[R]
.UE \c
\ is used for the mouse.
.IP \[bu] 2
VirtIO Network (\f[CR]virtio-net\f[R]) is supported and enabled on macOS
Big Sur and newer but previous releases use \f[CR]vmxnet3\f[R].
.IP \[bu] 2
VirtIO Memory Ballooning is supported and enabled on macOS Big Sur and
newer but disabled for other support macOS releases.
.RE
.IP \[bu] 2
USB host and SPICE pass-through is:
.RS 2
.IP \[bu] 2
UHCI (USB 2.0) on macOS Catalina and earlier.
.IP \[bu] 2
XHCI (USB 3.0) on macOS Big Sur and newer.
.RE
.IP \[bu] 2
Display resolution can only be changed via macOS System Preferences.
.IP \[bu] 2
\f[B]Full Duplex audio requires \c
.UR https://github.com/chris1111/VoodooHDA-OC
VoodooHDA OC
.UE \c
\ or pass-through a USB audio-device to the macOS guest VM\f[R].
.IP \[bu] 2
NOTE!
\c
.UR https://disable-gatekeeper.github.io/
Gatekeeper
.UE \c
\ and \c
.UR
https://developer.apple.com/documentation/security/disabling_and_enabling_system_integrity_protection
System Integrity Protection (SIP)
.UE \c
\ need to be disabled to install VoodooHDA OC
.IP \[bu] 2
File sharing between guest and host is available via \c
.UR https://wiki.qemu.org/Documentation/9psetup
virtio-9p
.UE \c
\ and \c
.UR https://gitlab.gnome.org/GNOME/phodav/-/merge_requests/24
SPICE webdavd
.UE \c
\&.
.IP \[bu] 2
Copy/paste via SPICE agent is \f[B]not available on macOS\f[R].
.SS macOS App Store
If you see \f[I]\[lq]Your device or computer could not be
verified\[rq]\f[R] when you try to login to the App Store, make sure
that your wired ethernet device is \f[CR]en0\f[R].
Use \f[CR]ifconfig\f[R] in a terminal to verify this.
.PP
If the wired ethernet device is not \f[CR]en0\f[R], then then go to
\f[I]System Preferences\f[R] -> \f[I]Network\f[R], delete all the
network devices and apply the changes.
Next, open a terminal and run the following:
.IP
.EX
sudo rm /Library/Preferences/SystemConfiguration/NetworkInterfaces.plist
.EE
.PP
Now reboot, and the App Store should work.
.SS Windows 8, 10 & 11 Guests
\f[CR]quickget\f[R] can download \c
.UR https://www.microsoft.com/software-download/windows10
Windows10
.UE \c
\ and \c
.UR https://www.microsoft.com/software-download/windows11
Windows 11
.UE \c
\ automatically and create an optimised virtual machine configuration.
This configuration also includes the \c
.UR https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/
VirtIO drivers for Windows
.UE \c
\&.
.PP
Windows 8.1 is also supported but doesn\[cq]t feature any automated
installation or driver optimisation.
.IP
.EX
quickget windows 11
quickemu --vm windows-11.conf
.EE
.IP \[bu] 2
Complete the installation as you normally would.
.IP \[bu] 2
All relevant drivers and services should be installed automatically.
.IP \[bu] 2
A local administrator user account is automatically created, with these
credentials:
.RS 2
.IP \[bu] 2
Username: \f[CR]Quickemu\f[R]
.IP \[bu] 2
Password: \f[CR]quickemu\f[R]
.RE
.PP
The default Windows 11 configuration looks like this:
.IP
.EX
guest_os=\[dq]windows\[dq]
disk_img=\[dq]windows-11/disk.qcow2\[dq]
iso=\[dq]windows-11/windows-11.iso\[dq]
fixed_iso=\[dq]windows-11/virtio-win.iso\[dq]
tpm=\[dq]on\[dq]
secureboot=\[dq]off\[dq]
.EE
.IP \[bu] 2
\f[CR]guest_os=\[dq]windows\[dq]\f[R] instructs \f[CR]quickemu\f[R] to
optimise for Windows.
.IP \[bu] 2
\f[CR]fixed_iso=\f[R] specifies the ISO image that provides VirtIO
drivers.
.IP \[bu] 2
\f[CR]tpm=\[dq]on\[dq]\f[R] instructs \f[CR]quickemu\f[R] to create a
software emulated TPM device using \f[CR]swtpm\f[R].
.SH All the options
Here are the usage instructions:
.IP
.EX
Usage
  quickemu --vm ubuntu.conf

You can also pass optional parameters
  --access                          : Enable remote spice access support. \[aq]local\[aq] (default), \[aq]remote\[aq], \[aq]clientipaddress\[aq]
  --braille                         : Enable braille support. Requires SDL.
  --delete-disk                     : Delete the disk image and EFI variables
  --delete-vm                       : Delete the entire VM and it\[aq]s configuration
  --display                         : Select display backend. \[aq]sdl\[aq] (default), \[aq]gtk\[aq], \[aq]none\[aq], \[aq]spice\[aq] or \[aq]spice-app\[aq]
  --fullscreen                      : Starts VM in full screen mode (Ctl+Alt+f to exit)
  --ignore-msrs-always              : Configure KVM to always ignore unhandled machine-specific registers
  --screen <screen>                 : Use specified screen to determine the window size.
  --screenpct <percent>             : Percent of fullscreen for VM if --fullscreen is not specified.
  --shortcut                        : Create a desktop shortcut
  --snapshot apply <tag>            : Apply/restore a snapshot.
  --snapshot create <tag>           : Create a snapshot.
  --snapshot delete <tag>           : Delete a snapshot.
  --snapshot info                   : Show disk/snapshot info.
  --status-quo                      : Do not commit any changes to disk/snapshot.
  --viewer <viewer>                 : Choose an alternative viewer. \[at]Options: \[aq]spicy\[aq] (default), \[aq]remote-viewer\[aq], \[aq]none\[aq]
  --ssh-port <port>                 : Set ssh-port manually
  --spice-port <port>               : Set spice-port manually
  --public-dir <path>               : Expose share directory. \[at]Options: \[aq]\[aq] (default: xdg-user-dir PUBLICSHARE), \[aq]<directory>\[aq], \[aq]none\[aq]
  --monitor <type>                  : Set monitor connection type. \[at]Options: \[aq]socket\[aq] (default), \[aq]telnet\[aq], \[aq]none\[aq]
  --monitor-telnet-host <ip/host>   : Set telnet host for monitor. (default: \[aq]localhost\[aq])
  --monitor-telnet-port <port>      : Set telnet port for monitor. (default: \[aq]4440\[aq])
  --monitor-cmd <cmd>               : Send command to monitor if available. (Example: system_powerdown)
  --serial <type>                   : Set serial connection type. \[at]Options: \[aq]socket\[aq] (default), \[aq]telnet\[aq], \[aq]none\[aq]
  --serial-telnet-host <ip/host>    : Set telnet host for serial. (default: \[aq]localhost\[aq])
  --serial-telnet-port <port>       : Set telnet port for serial. (default: \[aq]6660\[aq])
  --keyboard <type>                 : Set keyboard. \[at]Options: \[aq]usb\[aq] (default), \[aq]ps2\[aq], \[aq]virtio\[aq]
  --keyboard_layout <layout>        : Set keyboard layout.
  --mouse <type>                    : Set mouse. \[at]Options: \[aq]tablet\[aq] (default), \[aq]ps2\[aq], \[aq]usb\[aq], \[aq]virtio\[aq]
  --usb-controller <type>           : Set usb-controller. \[at]Options: \[aq]ehci\[aq] (default), \[aq]xhci\[aq], \[aq]none\[aq]
  --sound-card <type>               : Set sound card. \[at]Options: \[aq]intel-hda\[aq] (default), \[aq]ac97\[aq], \[aq]es1370\[aq], \[aq]sb16\[aq], \[aq]none\[aq]
  --extra_args <arguments>          : Pass additional arguments to qemu
  --version                         : Print version
.EE
.SS Desktop shortcuts
Desktop shortcuts can be created for a VM, the shortcuts are saved in
\f[CR]\[ti]/.local/share/applications\f[R].
Here is an example of how to create a shortcut.
.IP
.EX
quickemu --vm ubuntu-22.04-desktop.conf --shortcut
.EE
.SS Screen and window size (Linux guests only)
\f[CR]qemu\f[R] will always default to the primary monitor to display
the VM\[cq]s window.
.PP
Without the \f[CR]--screen\f[R] option, \f[CR]quickemu\f[R] will look
for the size of the smallest monitor, and use a size that fits on said
monitor.
.PP
The \f[CR]--screen\f[R] option forces \f[CR]quickemu\f[R] to use the
size of the given monitor to compute the size of the window.
\f[B]It won\[cq]t use that monitor to display the VM\[cq]s window if
it\[cq]s not the primary monitor\f[R].
This is useful if the primary monitor if not the smallest one, and if
the VM\[cq]s window doesn\[cq]t need to be moved around.
.PP
The \f[CR]--screen\f[R] option is also useful with the
\f[CR]--fullscreen\f[R] option, again because \f[CR]qemu\f[R] will
always use the primary monitor.
In order for the fullscreen mode to work properly, the resolution of the
VM\[cq]s window must match the resolution of the screen.
.PP
To know which screen to use, type:
.IP
.EX
xrandr --listmonitors | grep -v Monitors
.EE
.PP
The command will output something like this:
.IP
.EX
 0: +*HDMI-0 2560/597x1440/336+1920+0  HDMI-0
 1: +DVI-D-0 1920/527x1080/296+0+0  DVI-D-0
.EE
.PP
The first number is what needs to be passed to the \f[CR]--screen\f[R]
option.
.PP
For example:
.IP
.EX
quickemu --vm vm.conf --screen 0
.EE
.PP
The above uses the 2560x1440 screen to compute the size of the window,
which Quickemu sizes to 2048x1152.
Without the \f[CR]--screen\f[R] option, Quickemu would have used the
1920x1080 monitor which results in a window size of 1664x936.
.PP
The `\[en]screenpct' is an optional integer value between 25 <= pct <
100 which will override system default screen sizes.
The VM size will be `pct' of the chosen screen.
\f[B]If \[en]fullscreen is chosen screen will be fullsize instead of
being scaled down by \[en]screenpct value.\f[R]
.SH References
Useful reference that assisted the development of Quickemu.
.IP \[bu] 2
General
.RS 2
.IP \[bu] 2
\c
.UR https://qemu.readthedocs.io/en/latest/
QEMU\[cq]s documentation!
.UE \c
.IP \[bu] 2
\c
.UR https://pve.proxmox.com/wiki/Qemu/KVM_Virtual_Machines
.UE \c
.IP \[bu] 2
\c
.UR https://www.kraxel.org/blog/2020/01/qemu-sound-audiodev/
.UE \c
.RE
.IP \[bu] 2
macOS
.RS 2
.IP \[bu] 2
\c
.UR
https://www.nicksherlock.com/2020/06/installing-macos-big-sur-on-proxmox/
.UE \c
.IP \[bu] 2
\c
.UR https://passthroughpo.st/mac-os-adds-early-support-for-virtio-qemu/
.UE \c
.IP \[bu] 2
\c
.UR https://github.com/kholia/OSX-KVM
.UE \c
.IP \[bu] 2
\c
.UR https://github.com/thenickdude/KVM-Opencore
.UE \c
.IP \[bu] 2
\c
.UR
https://github.com/acidanthera/OpenCorePkg/tree/master/Utilities/macrecovery
.UE \c
.IP \[bu] 2
\c
.UR https://www.kraxel.org/blog/2017/09/running-macos-as-guest-in-kvm/
.UE \c
.IP \[bu] 2
\c
.UR
https://www.nicksherlock.com/2017/10/passthrough-of-advanced-cpu-features-for-macos-high-sierra-guests/
.UE \c
.IP \[bu] 2
\c
.UR http://philjordan.eu/osx-virt/
.UE \c
.IP \[bu] 2
\c
.UR https://github.com/Dids/clover-builder
.UE \c
.IP \[bu] 2
\c
.UR https://mackie100projects.altervista.org
OpenCore Configurator
.UE \c
.RE
.IP \[bu] 2
Windows
.RS 2
.IP \[bu] 2
\c
.UR
https://www.heiko-sieger.info/running-windows-10-on-linux-using-kvm-with-vga-passthrough/
.UE \c
.IP \[bu] 2
\c
.UR
https://leduccc.medium.com/improving-the-performance-of-a-windows-10-guest-on-qemu-a5b3f54d9cf5
.UE \c
.IP \[bu] 2
\c
.UR
https://frontpagelinux.com/tutorials/how-to-use-linux-kvm-to-optimize-your-windows-10-virtual-machine/
.UE \c
.IP \[bu] 2
\c
.UR https://turlucode.com/qemu-command-line-args/
.UE \c
.IP \[bu] 2
\c
.UR https://github.com/pbatard/Fido
.UE \c
.IP \[bu] 2
\c
.UR
https://www.catapultsystems.com/blogs/create-zero-touch-windows-10-iso/
.UE \c
.RE
.IP \[bu] 2
TPM
.RS 2
.IP \[bu] 2
\c
.UR https://qemu-project.gitlab.io/qemu/specs/tpm.html
.UE \c
.IP \[bu] 2
\c
.UR
https://www.tecklyfe.com/how-to-create-a-windows-11-virtual-machine-in-qemu/
.UE \c
.RE
.IP \[bu] 2
9p & virtiofs
.RS 2
.IP \[bu] 2
\c
.UR https://wiki.qemu.org/Documentation/9p
.UE \c
.IP \[bu] 2
\c
.UR https://wiki.qemu.org/Documentation/9psetup
.UE \c
.IP \[bu] 2
\c
.UR https://www.kraxel.org/blog/2019/06/macos-qemu-guest/
.UE \c
.IP \[bu] 2
\c
.UR
https://superuser.com/questions/628169/how-to-share-a-directory-with-the-host-without-networking-in-qemu
.UE \c
.IP \[bu] 2
\c
.UR https://virtio-fs.gitlab.io/
.UE \c
.RE
.SH AUTHORS
Written by Martin Wimpress.
.SH BUGS
Submit bug reports online at: \c
.UR https://github.com/quickemu-project/quickemu/issues
.UE \c
.SH SEE ALSO
Full sources at: \c
.UR https://github.com/quickemu-project/quickemu
.UE \c
.PP
quickemu_conf(1), quickget(1), quickgui(1)
.SH AUTHORS
Martin Wimpress.
